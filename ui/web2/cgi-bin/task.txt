0 wash_olive type action mode manual requires { olive } provides { olive } agent { bartender } script { if you are not using olives packed in vermouth, wash one or two olives per martini under tap to remove the brine } 
1 skewer_olive type action mode manual requires { olive martini-glass toothpick } provides { martini-glass } agent { bartender } script { place one or two olives on a toothpick and insert into well chilled martini glass } 
2 add_ice type action mode manual requires { ice shaker } provides { shaker } agent { bartender } script { add enough ice to shaker so that the gin will just barely cover it. } 
3 add_vermouth type action mode manual requires { vermouth shaker } provides { shaker } agent { bartender } script { add generous amount of vermouth, swirl in shaker so ice and sides are coated, then discard. } 
4 add_gin type action mode manual requires { gin shaker } provides { shaker } agent { bartender } script { add appropriate amount of gin (preferably Beefeaters), about two ounces per martini. } 
5 shake type action mode manual requires { shaker } provides { shaker } agent { bartender } script { shake gently until ingredients are well chilled.  The shaking should not be so violent that it breaks chips off the ice; a vigourous swirling motion can be substituted. } 
6 fill_glass type action mode manual requires { martini-glass pitcher } provides { martini } agent { bartender } script { pour an appropriate amount into a prepared martini glass.  Appropriate is enough so that all glasses end up with the same amount. } 
7 sip type action mode manual requires { martini } provides { martini } agent { patron } script { Sip slowly, while enjoying conversation, sports, or the Wall Street Journal. } 
8 smile type action mode manual requires { martini } provides { martini } agent { patron } script { If you get this far, no problem.. } 
9 start
10 push 0 
11 pop 
12 call set ready wash_olive
13 jzero 101
14 pop
15 call wait done wash_olive
16 jzero 101
17 pop
18 call assert 
19 jzero 101
20 push 0 
21 pop 
22 call set ready skewer_olive
23 jzero 101
24 pop
25 call wait done skewer_olive
26 jzero 101
27 pop
28 call assert 
29 jzero 101
30 push 0 
31 pop 
32 call set ready add_ice
33 jzero 101
34 pop
35 call wait done add_ice
36 jzero 101
37 pop
38 call assert 
39 jzero 101
40 push 0 
41 pop 
42 call set ready add_vermouth
43 jzero 101
44 pop
45 call wait done add_vermouth
46 jzero 101
47 pop
48 call assert 
49 jzero 101
50 push 0 
51 pop 
52 call set ready add_gin
53 jzero 101
54 pop
55 call wait done add_gin
56 jzero 101
57 pop
58 call assert 
59 jzero 101
60 push 0 
61 pop 
62 call set ready shake
63 jzero 101
64 pop
65 call wait done shake
66 jzero 101
67 pop
68 call assert 
69 jzero 101
70 push 0 
71 pop 
72 call set ready fill_glass
73 jzero 101
74 pop
75 call wait done fill_glass
76 jzero 101
77 pop
78 call assert 
79 jzero 101
80 push 0 
81 pop 
82 call set ready sip
83 jzero 101
84 pop
85 call wait done sip
86 jzero 101
87 pop
88 call assert 
89 jzero 101
90 push 0 
91 pop 
92 call set ready smile
93 jzero 101
94 pop
95 call wait done smile
96 jzero 101
97 pop
98 call assert 
99 jzero 101
100 end
101 call error
